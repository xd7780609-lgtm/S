# Cargo configuration for Android builds
# Fixes TLS alignment issue on ARM64 Android 14+ (API 34+)
# Error: "linker64": executable's TLS segment is underaligned: alignment is 16, needs to be at least 64

[target.aarch64-linux-android]
rustflags = [
    "-C", "link-arg=-Wl,-z,max-page-size=16384",
    "-C", "link-arg=-Wl,-z,separate-loadable-segments",
]

[target.armv7-linux-androideabi]
rustflags = [
    "-C", "link-arg=-Wl,-z,max-page-size=16384",
    "-C", "link-arg=-Wl,-z,separate-loadable-segments",
]

[target.i686-linux-android]
rustflags = [
    "-C", "link-arg=-Wl,-z,max-page-size=16384",
    "-C", "link-arg=-Wl,-z,separate-loadable-segments",
]

[target.x86_64-linux-android]
rustflags = [
    "-C", "link-arg=-Wl,-z,max-page-size=16384",
    "-C", "link-arg=-Wl,-z,separate-loadable-segments",
]
